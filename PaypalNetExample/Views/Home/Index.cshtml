@model PaypalClientData

<script src="@Model.ClientUrl/sdk/js?client-id=@Model.ClientId&currency=@Model.Currency&locale=@Model.Locale"></script>

<div id="paypal-button-container"></div>

<script>
    paypal.Buttons({
        createOrder: function() {
            return fetch('/Payment/Create?amount=500', { method: 'POST' })
                .then(res => res.json())
                .then(data => data.id);
        },
        onApprove: function(data) {
            return fetch(`/paypal/success?token=${data.orderID}`)
                .then(res => res.json())
                .then(order => {
                    if (order.status === 'COMPLETED') {
                        alert('Pago completado con éxito');
                    }
                });
        },
        onCancel: function() {
            alert('Pago cancelado');
        }
    }).render('#paypal-button-container');
</script>
